var game;(function(n){function vt(n){i=document.getElementById(n),r=new createjs.Stage(i),s=new createjs.Text("0","bold 12px Arial","#FFFFFF"),s.textAlign="right",s.x=i.width-10,s.y=22,o=new createjs.Text("Welcome:  Click to play","bold 24px Arial","#FFFFFF"),o.textAlign="center",o.x=i.width/2,o.y=i.height/2,document.onkeydown=dt,document.onkeyup=gt,et()}function et(){r.addChild(o),r.update(),i.onclick=yt}function yt(){i.onclick=null,r.removeChild(o),pt()}function pt(){r.removeAllChildren(),s.text=(0).toString(),r.addChild(s),u=[],f=[],e=!0,t=new Ship,t.x=i.width/2,t.y=i.height/2,v=ht,y=0,p=0,h=!1,c=!1,l=!1,a=!1,r.clear(),r.addChild(t),createjs.Ticker.addListener(wt)}function wt(){var s,rt,n,tt,g,it,ut,nt,ft;p<=0?e&&h&&(p=lt,bt()):p--,e&&c?t.rotation-=k:e&&l&&(t.rotation+=k),e&&a&&t.accelerate(),y<=0?e&&(v-=st,nt=ot(SpaceRock.LRG_ROCK),u[nt].floatOnScreen(i.width,i.height),y=v+v*Math.random()):y--,e&&w(t,t.bounds)&&b(t,t.bounds);for(tt in f)(s=f[tt],s&&s.active)&&(w(s,t.bounds)&&b(s,t.bounds),s.x+=Math.sin(s.rotation*(Math.PI/-180))*d,s.y+=Math.cos(s.rotation*(Math.PI/-180))*d,--s.entropy<=0&&(r.removeChild(s),s.active=!1));for(rt in u)if(n=u[rt],n&&n.active){if(w(n,n.bounds)&&b(n,n.bounds),n.tick(),e&&n.hitRadius(t.x,t.y,t.hit)){e=!1,r.removeChild(t),o.text="You're dead:  Click to play again",r.addChild(o),et();continue}for(tt in f)if((g=f[tt],g&&g.active)&&n.hitPoint(g.x,g.y)){switch(n.size){case SpaceRock.LRG_ROCK:it=SpaceRock.MED_ROCK;break;case SpaceRock.MED_ROCK:it=SpaceRock.SML_ROCK;break;case SpaceRock.SML_ROCK:it=0}if(e&&ni(n.score),it>0)for(ut=0;ut<ct;ut++)nt=ot(it),ft=Math.random()*n.size*2-n.size,u[nt].x=n.x+ft,u[nt].y=n.y+ft;r.removeChild(n),u[rt].active=!1,r.removeChild(g),f[tt].active=!1}}t.tick(),r.update()}function w(n,t){return n.x<t*-2||n.y<t*-2||n.x>i.width+t*2||n.y>i.height+t*2}function b(n,t){n.x>i.width+t*2?n.x=t*-2:n.x<t*-2&&(n.x=i.width+t*2),n.y>i.height+t*2?n.y=t*-2:n.y<t*-2&&(n.y=i.height+t*2)}function bt(){var n=f[kt()];n.x=t.x,n.y=t.y,n.rotation=t.rotation,n.entropy=at,n.active=!0,n.graphics.beginStroke("#FFFFFF").moveTo(-1,0).lineTo(1,0)}function ot(n){for(var t=0,i=u.length;t<=i;)if(u[t])if(u[t].active)t++;else{u[t].activate(n);break}else{u[t]=new SpaceRock(n);break}return i==0&&(u[0]=new SpaceRock(n)),r.addChild(u[t]),t}function kt(){for(var n=0,t=f.length;n<=t;)if(f[n])if(f[n].active)n++;else{f[n].active=!0;break}else{f[n]=new Bullet;break}return t==0&&(f[0]=new Bullet),r.addChild(f[n]),n}function dt(n){if(!n)var n=window.event;switch(n.keyCode){case g:h=!0;break;case ut:case tt:c=!0;break;case ft:case it:l=!0;break;case rt:case nt:a=!0}}function gt(n){if(!n)var n=window.event;switch(n.keyCode){case g:h=!1;break;case ut:case tt:c=!1;break;case ft:case it:l=!1;break;case rt:case nt:a=!1}}function ni(n){s.text=(Number(s.text)+Number(n)).toString()}var st=2,ht=110,ct=4,lt=5,at=100,k=7,d=17,g=32,nt=38,tt=37,it=39,rt=87,ut=65,ft=68,h,c,l,a,v,y,p,u,f,i,r,t,e,o,s;n.init=vt})(game||(game={}))